<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="NK-mapper">

	<resultMap type="boardVo" id="boardMap">
		<result property="board_no" column="BOARD_NO"/>
		<result property="id" column="ID"/>
		<result property="board_title" column="BOARD_TITLE"/>
		<result property="board_content" column="BOARD_CONTENT"/>
		<result property="board_regdate" column="BOARD_REGDATE"/>
		<result property="board_nyn" column="BOARD_NYN"/>
		<result property="board_file" column="BOARD_FILE"/>
		<result property="board_hash" column="BOARD_HASH"/>
	</resultMap>
	
	<!-- 무료나눔 selectList -->
	<select id="selectListShNotice" resultType="boardVo">
		SELECT BOARD_NO, ID, BOARD_TITLE, BOARD_CONTENT, BOARD_REGDATE, BOARD_FILE, BOARD_HASH
		FROM TEST_BOARD
		WHERE BOARD_CATE='SH' AND BOARD_NYN='Y'
		ORDER BY BOARD_NO DESC
	</select>
	
	<select id="selectListSh" resultType="boardVo">
		SELECT BOARD_NO, ID, BOARD_TITLE, BOARD_CONTENT, BOARD_REGDATE, BOARD_FILE, BOARD_HASH 
		FROM TEST_BOARD
		WHERE BOARD_CATE='SH' AND BOARD_NYN='N'
		ORDER BY BOARD_NO DESC
	</select>

	<!-- 물물교환 selectList -->
	<select id="selectListExNotice" resultType="boardVo">
		SELECT BOARD_NO, ID, BOARD_TITLE, BOARD_CONTENT, BOARD_REGDATE, BOARD_FILE, BOARD_HASH 
		FROM TEST_BOARD
		WHERE BOARD_CATE='EX' AND BOARD_NYN='Y'
		ORDER BY BOARD_NO DESC
	</select>

	<select id="selectListEx" resultType="boardVo">
		SELECT BOARD_NO, ID, BOARD_TITLE, BOARD_CONTENT, BOARD_REGDATE, BOARD_FILE, BOARD_HASH 
		FROM TEST_BOARD
		WHERE BOARD_CATE='EX' AND BOARD_NYN='N'
		ORDER BY BOARD_NO DESC
	</select>
	
	<!-- selectOne -->	
	<select id="selectOneBoard" parameterType="int" resultType="boardVo">
		SELECT BOARD_NO, ID, BOARD_TITLE, BOARD_CONTENT, BOARD_REGDATE, BOARD_FILE, BOARD_HASH 
		FROM TEST_BOARD
		WHERE BOARD_NO=#{board_no}
	</select>
	
	<!-- 게시글을 공지로 등록하는 update -->
	<update id="updateBoardToNotice" parameterType="int" >
		UPDATE TEST_BOARD SET BOARD_NYN='Y' 
		WHERE BOARD_NYN='N' AND BOARD_NO=#{board_no}
	</update>

	<!-- 공지글을 일반 게시글로 내리는 update -->
	<update id="updateNoticeToBoard" parameterType="int" >
		UPDATE TEST_BOARD SET BOARD_NYN='N' 
		WHERE BOARD_NYN='Y' AND BOARD_NO=#{board_no}
	</update>
	
	<!-- 게시글 작성 -->
	<insert id="insertBoard" parameterType="boardVo">
		INSERT INTO TEST_BOARD
		VALUES(TEST_BOARD_SEQ.NEXTVAL, #{board_cate}, 'test', #{board_title}, #{board_content}, SYSDATE, 'N', #{board_file}, #{board_hash})
	</insert>

</mapper>
















